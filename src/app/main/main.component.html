<main>
  <div *ngIf="!details">
    <section class="container form-container">
      <h3>Select the required files and submit to generate the report</h3>
      <form id="file-form">
        <div class="field">
          <label for="basic">Choose basic data: </label>
          <input type="file" id="basic" name="basic" accept="text/csv" required>
        </div>
        <div class="field">
          <label for="company">Choose company data: </label>
          <input type="file" id="company" name="company" accept="text/csv" required>
        </div>
        <div class="field">
          <label for="driver">Choose driver data: </label>
          <input type="file" id="driver" name="driver" accept="text/csv" required>
        </div>
        <div class="field">
          <label for="vehicle">Choose vehicle data: </label>
          <input type="file" id="vehicle" name="vehicle" accept="text/csv" required>
        </div>
        <div class="field">
          <label for="location">Choose location data: </label>
          <input type="file" id="location" name="location" accept="text/csv" required>
        </div>
        <div>
          <button (click)="submitFiles($event)">Generate Report</button>
        </div>
      </form>
    </section>
  </div>
  <div *ngIf="details">
    <header class="container">
      <div class="logo-group">
        <div class="logo">
          <img src="assets/images/logo.png" alt="">
        </div>
        <div class="heading">
          <h1 class="main-heading">Collision Report</h1>
          <h3 class="sub-heading">{{details.companyDetails.name}}</h3>
        </div>
      </div>

      <div class="report-details">
        <h6>{{details.basicDetails.reportDate}}</h6>
        <h6>Report id: {{details.basicDetails.reportId}}</h6>
        <h6>Generated by: {{details.basicDetails.generatedBy}}</h6>
      </div>
    </header>

    <hr>

    <section class="container report">
      <article class="left">
        <div class="section-wrapper" *ngIf="details">
          <h1 class="section-heading">Telematics - Vehicle location and speed</h1>
          <h2 class="section-subheading">Information for the hour leading up to the event.</h2>
          <div class="map-graph-container">
            <app-map mapType="roadmap">
              <map-marker [lat]="details.eventDetails.lat" [lng]="details.eventDetails.lng"
                          type="collision" [zIndex]="100" [autoZoom]="true">
              </map-marker>

              <map-polyline [coords]="details.locationDetails" [autoZoom]="true"
                            zIndex="1" color="#5daa12" width="8"></map-polyline>
            </app-map>
            <app-collision-report-slider [data]="data" [startTime]="data[6]" [endTime]="data[16]"></app-collision-report-slider>
            <app-line-chart [data]="data1"></app-line-chart>

            <div class="line-chart-meta">
              <div class="left">
                <span class="collision">
                  <img src="assets/images/event-collision-timeline.svg" alt="">
                <span class="text">Collision</span>
                </span>
                <span class="driving text">Driving</span>
              </div>
              <div class="right">
                <span class="speed text">Speed</span>
              </div>
            </div>
          </div>

          <div class="satellite-map">
            <app-map mapType="satellite">
              <map-marker [lat]="details.eventDetails.lat" [lng]="details.eventDetails.lng"
                          type="collision_bg" [zIndex]="100" [autoZoom]="true">
              </map-marker>
            </app-map>

            <div class="text">Satellite view</div>
          </div>
        </div>

      </article>
      <article class="right">
        <div class="info-container">
          <h1 class="section-heading">Event</h1>

          <ul class="info">
            <li>
              <div class="left">Timestamp</div>
              <div class="right">{{details.eventDetails.timestamp}}</div>
            </li>
            <li>
              <div class="left">Time Zone (from GPS)</div>
              <div class="right">UTC -5</div>
            </li>
            <li>
              <div class="left">GPS Co-ordinates</div>
              <div class="right">{{details.eventDetails.lat}}, {{details.eventDetails.lng}}</div>
            </li>
            <li>
              <div class="left">Street Address</div>
              <div class="right">{{details.eventDetails.address}}</div>
            </li>
          </ul>
        </div>

        <div class="info-container">
          <h1 class="section-heading">Company</h1>

          <ul class="info">
            <li>
              <div class="left">Name</div>
              <div class="right">{{details.companyDetails.name}}</div>
            </li>
            <li>
              <div class="left">Address</div>
              <div class="right">{{details.companyDetails.address}}</div>
            </li>
            <li>
              <div class="left">DOT Number</div>
              <div class="right">{{details.companyDetails.dotNo}}</div>
            </li>
          </ul>

          <hr>

          <ul class="info">
            <li>
              <div class="left">Person of Contact</div>
              <div class="right">{{details.basicDetails.pocName}}</div>
            </li>
            <li>
              <div class="left">Email</div>
              <div class="right">{{details.basicDetails.pocEmail}}</div>
            </li>
            <li>
              <div class="left">Direct Phone Number</div>
              <div class="right">{{details.basicDetails.pocPhone}}</div>
            </li>
          </ul>
        </div>

        <div class="info-container">
          <h1 class="section-heading">Driver</h1>

          <ul class="info">
            <li>
              <div class="left">Name</div>
              <div class="right">{{details.driverDetails.name}}</div>
            </li>
            <li>
              <div class="left">Email</div>
              <div class="right">{{details.driverDetails.email}}</div>
            </li>
            <li>
              <div class="left">Phone Number</div>
              <div class="right">{{details.driverDetails.phone}}</div>
            </li>
          </ul>

          <hr>

          <ul class="info">
            <li>
              <div class="left">License Number</div>
              <div class="right">{{details.driverDetails.licenseNo}}</div>
            </li>
            <li>
              <div class="left">State</div>
              <div class="right">{{details.driverDetails.state}}</div>
            </li>
          </ul>
        </div>

        <div class="info-container">
          <h1 class="section-heading">Vehicle</h1>

          <ul class="info">
            <li>
              <div class="left">Make</div>
              <div class="right">{{details.vehicleDetails.make}}</div>
            </li>
            <li>
              <div class="left">Model</div>
              <div class="right">{{details.vehicleDetails.model}}</div>
            </li>
            <li>
              <div class="left">Year</div>
              <div class="right">{{details.vehicleDetails.year}}</div>
            </li>
            <li>
              <div class="left">VIN</div>
              <div class="right">{{details.vehicleDetails.vin}}</div>
            </li>
            <li>
              <div class="left">License Plate Number</div>
              <div class="right">{{details.vehicleDetails.licensePlate}}</div>
            </li>
            <li>
              <div class="left">State</div>
              <div class="right">{{details.vehicleDetails.state}}</div>
            </li>
          </ul>
        </div>
      </article>
    </section>
  </div>
</main>
